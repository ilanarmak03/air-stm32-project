# STM32 Air Quality Monitor (ENS160 + AHT21)
This project uses an STM32 microcontroller to read environmental data from an **AHT21** sensor (temperature and humidity) and send it to the **ENS160** gas sensor to estimate **air quality**, **eCO₂**, and **TVOC**. Data is output via UART and displayed in real time.

## 📦 Features

- Reads temperature & humidity from **AHT21**
- Sends compensation data to **ENS160**
- Reads eCO₂, AQI, and TVOC from **ENS160**
- Outputs data via UART (`printf`) for serial monitoring
- Designed in **STM32CubeIDE**
- Uses **I²C communication**

## 🧰 Hardware Requirements

- ✅ STM32F3 / STM32 Nucleo board  
- ✅ ENS160+AHT21 air quality sensor module (I2C)

## 🔧 Software Tools

- [STM32CubeIDE](https://www.st.com/en/development-tools/stm32cubeide.html)
- STM32 HAL drivers (auto-generated by CubeMX)


## 🔌 Wiring

| Sensor | STM32 Pin |
|--------|-----------|
| ENS160+AHT21 SDA | I2C1 SDA (PA14) |
| ENS160+AHT21 SCL | I2C1 SCL (PA15) |
| UART TX | PA2 |
| UART RX | PA3 |
| GND | GND |
| 3V3 | 3V3 |

## 🖥️ Serial Output Format

Example UART output:
Humidity: 31.46%  | Temperature: 30.44 C | Air Quality: 1 | eCO2: 483 ppm


## 🧪 How It Works

1. AHT21 is queried for temp/RH
2. These values are converted and sent to ENS160’s `TEMP_IN` and `RH_IN`
3. ENS160 processes them and returns eCO₂ and AQI readings
4. UART outputs the final result

## 🚀 Getting Started

1. Clone this repository
2. Open the `.ioc` file in STM32CubeIDE
3. Generate code and build
4. Flash to STM32 board
5. Monitor UART (e.g., `screen /dev/ttyACM0 38400`)

## 📁 Repository Structure

/Core → Application source and headers
/Drivers → HAL and CMSIS drivers
.ioc → STM32CubeMX configuration file
.gitignore → Ignores build and temp files
README.md → You're here!

## 📚 Datasheets
For more technical details about the sensors and microcontroller used in this project:

AHT21 – Temperature & Humidity Sensor

[📄 AHT21 Datasheet (PDF)](https://github.com/user-attachments/files/20439829/AHT21.datasheet.ASAIR.pdf)


ENS160 – Digital Air Quality Sensor

[📄 ENS160 Datasheet (PDF)](https://github.com/user-attachments/files/20439834/ENS160.datasheet.ScioSense.pdf)


NUCLEO-F302R8 – ARM Cortex-M4 MCU

[📄 STM32F3 Reference Manual (PDF)](https://os.mbed.com/platforms/ST-Nucleo-F302R8/)

These documents include sensor I²C protocols, register maps, electrical characteristics, and timing diagrams, which are essential for low-level implementation and debugging.


## 📜 License

MIT License — feel free to use, modify, and share!

## 🙋‍♂️ Author

**Ali Kamran (@ilanarmak03)**  
[🔗 akarex.info](https://www.akarex.info)
