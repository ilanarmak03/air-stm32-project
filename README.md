# STM32 Air Quality Monitor (ENS160 + AHT21)
This project uses an STM32 microcontroller to read environmental data from an **AHT21** sensor (temperature and humidity) and send it to the **ENS160** gas sensor to estimate **air quality**, **eCOâ‚‚**, and **TVOC**. Data is output via UART and displayed in real time.

## ğŸ“¦ Features

- Reads temperature & humidity from **AHT21**
- Sends compensation data to **ENS160**
- Reads eCOâ‚‚, AQI, and TVOC from **ENS160**
- Outputs data via UART (`printf`) for serial monitoring
- Designed in **STM32CubeIDE**
- Uses **IÂ²C communication**

## ğŸ§° Hardware Requirements

- âœ… STM32F3 / STM32 Nucleo board  
- âœ… ENS160+AHT21 air quality sensor module (I2C)

## ğŸ”§ Software Tools

- [STM32CubeIDE](https://www.st.com/en/development-tools/stm32cubeide.html)
- STM32 HAL drivers (auto-generated by CubeMX)


## ğŸ”Œ Wiring

| Sensor | STM32 Pin |
|--------|-----------|
| ENS160+AHT21 SDA | I2C1 SDA (PA14) |
| ENS160+AHT21 SCL | I2C1 SCL (PA15) |
| UART TX | PA2 |
| UART RX | PA3 |
| GND | GND |
| 3V3 | 3V3 |

## ğŸ–¥ï¸ Serial Output Format

Example UART output:
Humidity: 31.46%  | Temperature: 30.44 C | Air Quality: 1 | eCO2: 483 ppm


## ğŸ§ª How It Works

1. AHT21 is queried for temp/RH
2. These values are converted and sent to ENS160â€™s `TEMP_IN` and `RH_IN`
3. ENS160 processes them and returns eCOâ‚‚ and AQI readings
4. UART outputs the final result

## ğŸš€ Getting Started

1. Clone this repository
2. Open the `.ioc` file in STM32CubeIDE
3. Generate code and build
4. Flash to STM32 board
5. Monitor UART (e.g., `screen /dev/ttyACM0 38400`)

## ğŸ“ Repository Structure

/Core â†’ Application source and headers
/Drivers â†’ HAL and CMSIS drivers
.ioc â†’ STM32CubeMX configuration file
.gitignore â†’ Ignores build and temp files
README.md â†’ You're here!

## ğŸ“š Datasheets
For more technical details about the sensors and microcontroller used in this project:

AHT21 â€“ Temperature & Humidity Sensor

[ğŸ“„ AHT21 Datasheet (PDF)](https://github.com/user-attachments/files/20439829/AHT21.datasheet.ASAIR.pdf)


ENS160 â€“ Digital Air Quality Sensor

[ğŸ“„ ENS160 Datasheet (PDF)](https://github.com/user-attachments/files/20439834/ENS160.datasheet.ScioSense.pdf)


NUCLEO-F302R8 â€“ ARM Cortex-M4 MCU

[ğŸ“„ STM32F3 Reference Manual (PDF)](https://os.mbed.com/platforms/ST-Nucleo-F302R8/)

These documents include sensor IÂ²C protocols, register maps, electrical characteristics, and timing diagrams, which are essential for low-level implementation and debugging.


## ğŸ“œ License

MIT License â€” feel free to use, modify, and share!

## ğŸ™‹â€â™‚ï¸ Author

**Ali Kamran (@ilanarmak03)**  
[ğŸ”— akarex.info](https://www.akarex.info)
